import{i as O,j as s,r as a,e as U,T as m,B as N,Y as P,c,Z as W,D as _,a1 as I,a2 as M,a3 as A,a4 as B,a5 as w,a6 as k,a as V,d as C,a7 as E}from"./index-D1bn1UCx.js";import{V as z}from"./VendorLayout-Bea-PU2m.js";const G=O(s.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m3.61 6.34c1.07 0 1.93.86 1.93 1.93s-.86 1.93-1.93 1.93-1.93-.86-1.93-1.93c-.01-1.07.86-1.93 1.93-1.93m-6-1.58c1.3 0 2.36 1.06 2.36 2.36s-1.06 2.36-2.36 2.36-2.36-1.06-2.36-2.36c0-1.31 1.05-2.36 2.36-2.36m0 9.13v3.75c-2.4-.75-4.3-2.6-5.14-4.96 1.05-1.12 3.67-1.69 5.14-1.69.53 0 1.2.08 1.9.22-1.64.87-1.9 2.02-1.9 2.68M12 20c-.27 0-.53-.01-.79-.04v-4.07c0-1.42 2.94-2.13 4.4-2.13 1.07 0 2.92.39 3.84 1.15C18.28 17.88 15.39 20 12 20"}),"SupervisedUserCircleSharp"),Y=({open:h,setOpen:d,selectedStatus:u,selectedLead:i,fetchLeads:j})=>{const[g,v]=a.useState(u),x=async()=>{try{await C.post("/api/v1/employee/lead/update-status",{leadId:i,status:g},{withCredentials:!0}),j()}catch(f){console.log(f),E.error("Internal server error")}finally{d(!1)}};return s.jsx(s.Fragment,{children:s.jsx(I,{open:h,children:s.jsxs(N,{sx:{width:"500px"},children:[s.jsx(M,{children:"Select Status"}),s.jsx(A,{children:s.jsxs(B,{name:"Status",fullWidth:!0,value:g,onChange:f=>v(f.target.value),label:"Status",children:[s.jsx(w,{value:"unassigned",children:"Un-Assigned"},"unassigned"),s.jsx(w,{value:"assigned",children:"Assigned"},"assigned"),s.jsx(w,{value:"in-progress",children:"In-Progress"},"in-progress"),s.jsx(w,{value:"completed",children:"Completed"},"completed")]})}),s.jsxs(k,{children:[s.jsx(c,{onClick:()=>{d(!1)},children:"Cancel"}),s.jsx(c,{variant:"contained",color:"success",onClick:()=>{x()},children:"Update"})]})]})})})},Z=({open:h,setOpen:d,handleRequestLead:u})=>s.jsx(s.Fragment,{children:s.jsx(I,{open:h,children:s.jsxs(N,{sx:{width:"500px"},children:[s.jsx(M,{children:"Enter category for of leads"}),s.jsx(A,{children:s.jsx(V,{autoFocus:!0,required:!0,margin:"dense",id:"category",name:"category",label:"Enter Category",type:"text",fullWidth:!0,variant:"outlined"})}),s.jsxs(k,{children:[s.jsx(c,{onClick:()=>{d(!1)},children:"Cancel"}),s.jsx(c,{variant:"contained",color:"success",onClick:()=>{u()},children:"Request"})]})]})})}),H=({open:h,setOpen:d,selectedLeads:u,setSelectedLeads:i,fetchLeads:j})=>{const[g,v]=a.useState(""),[x,f]=a.useState([]),y=async()=>{const{data:l}=await C.get("/api/v1/vendor/all-manager");f(l.managers)},S=async()=>{await C.post("/api/v1/vendor/assign-leads",{managerId:g,leads:u},{withCredentials:!0}),d(!1),i([]),j()};return a.useEffect(()=>{y()},[]),s.jsx(s.Fragment,{children:s.jsx(I,{open:h,children:s.jsxs(N,{sx:{width:"500px"},children:[s.jsx(M,{children:"Select manager"}),s.jsx(A,{children:s.jsx(B,{id:"manager",name:"managers",fullWidth:!0,value:g,onChange:l=>v(l.target.value),label:"Select Manager",children:x==null?void 0:x.map(l=>s.jsxs(w,{value:l._id,children:[" ",l.firstName+" "+l.lastName," "]},l==null?void 0:l._id))})}),s.jsxs(k,{children:[s.jsx(c,{onClick:()=>{d(!1)},children:"Cancel"}),s.jsx(c,{variant:"contained",color:"success",onClick:()=>{S()},children:"Assign"})]})]})})})};function Q(){const h=[{field:"name",headerName:"Name",width:180,renderCell:e=>{var t,n;return s.jsxs("p",{children:[" ",(n=(t=e==null?void 0:e.row)==null?void 0:t.masterLead)==null?void 0:n.name," "]})}},{field:"location",headerName:"Location",width:150,renderCell:e=>{var t,n;return s.jsxs("p",{children:[" ",(n=(t=e==null?void 0:e.row)==null?void 0:t.masterLead)==null?void 0:n.location," "]})}},{field:"email",headerName:"Email ID",width:200,renderCell:e=>{var t,n;return s.jsxs("p",{children:[" ",(n=(t=e==null?void 0:e.row)==null?void 0:t.masterLead)==null?void 0:n.email," "]})}},{field:"phone",headerName:"Mobile no",width:120,renderCell:e=>{var t,n;return s.jsxs("p",{children:[" ",(n=(t=e==null?void 0:e.row)==null?void 0:t.masterLead)==null?void 0:n.phone," "]})}},{field:"details",headerName:"Lead For",width:400,renderCell:e=>{var t,n;return s.jsxs("p",{children:[" ",(n=(t=e==null?void 0:e.row)==null?void 0:t.masterLead)==null?void 0:n.details," "]})}},{field:"",headerName:"Status",width:400,renderCell:e=>{var t;return s.jsxs("p",{children:[" ",(t=e==null?void 0:e.row)==null?void 0:t.status," "]})}},{field:"manager",headerName:"Manager",width:250,renderCell:e=>{var t,n,r,o;return s.jsxs("p",{children:[" ",((n=(t=e==null?void 0:e.row)==null?void 0:t.manager)==null?void 0:n.firstName)+" "+((o=(r=e==null?void 0:e.row)==null?void 0:r.manager)==null?void 0:o.lastName)," "]})}},{field:"assignedTo",headerName:"Assigned To",width:250,renderCell:e=>{var t,n,r,o;return s.jsxs("p",{children:[" ",((n=(t=e==null?void 0:e.row)==null?void 0:t.assignedTo)==null?void 0:n.firstName)+" "+((o=(r=e==null?void 0:e.row)==null?void 0:r.assignedTo)==null?void 0:o.lastName)," "]})}},{field:"assignedBy",headerName:"Assigned By",width:250,renderCell:e=>{var t,n,r,o;return s.jsxs("p",{children:[" ",((n=(t=e==null?void 0:e.row)==null?void 0:t.assignedBy)==null?void 0:n.firstName)+" "+((o=(r=e==null?void 0:e.row)==null?void 0:r.assignedBy)==null?void 0:o.lastName)," "]})}}],[d,u]=a.useState([]),[i,j]=a.useState([]),[g,v]=a.useState(null),[x,f]=a.useState(null),[y,S]=a.useState(!1),[l,T]=a.useState(!1),[R,b]=a.useState(!1),[p,D]=a.useState(!1),L=async()=>{try{b(!0);const{data:e}=await C.get("/api/v1/vendor/all-leads",{withCredentials:!0});u(e==null?void 0:e.leads)}catch(e){console.log(e),E.error("Internal Server Error")}finally{b(!1)}},q=async()=>{try{await C.get("/api/v1/vendor/request-leads",{withCredentials:!0}),L(),S(!1)}catch(e){console.log(e)}},F=async e=>{j(e)};return a.useEffect(()=>{L()},[]),s.jsxs(z,{children:[s.jsx(U,{}),s.jsx(m,{variant:"h4",gutterBottom:!0,children:"Leads"}),s.jsxs(N,{style:{height:400,width:"100%",marginTop:"20px"},children:[s.jsxs(P,{alignItems:"flex-end",m:2,gap:3,children:[s.jsx(c,{onClick:()=>S(!0),startIcon:s.jsx(W,{}),variant:"contained",children:"Request Leads"}),s.jsx(c,{onClick:()=>T(!0),startIcon:s.jsx(G,{}),variant:"outlined",disabled:(i==null?void 0:i.length)<1,children:"Assign To"})]}),s.jsx(_,{rows:d,getRowId:e=>e._id,columns:h,pageSize:5,rowsPerPageOptions:[5,10,20],loading:R,checkboxSelection:!0,disableRowSelectionOnClick:!0,onRowSelectionModelChange:e=>F(e)})]}),y&&s.jsx(Z,{open:y,setOpen:S,handleRequestLead:q}),l&&s.jsx(H,{open:l,setOpen:T,selectedLeads:i,setSelectedLeads:j,fetchLeads:L}),p&&s.jsx(Y,{open:p,setOpen:D,selectedLead:g,selectedStatus:x,fetchLeads:L})]})}export{Q as default};
